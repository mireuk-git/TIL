# CodeKata

#### SQL

<b>1. </b>

[link](https://school.programmers.co.kr/learn/courses/30/lessons/276036#qna)

```sql
WITH SKILLS AS (
    SELECT 
    (SELECT CODE FROM SKILLCODES WHERE NAME = 'Python') AS PYTHON,
    (SELECT SUM(CODE) FROM SKILLCODES WHERE CATEGORY = 'Front End') AS FRONTEND,
    (SELECT CODE FROM SKILLCODES WHERE NAME = 'C#') AS C)
,
CTE AS (SELECT CASE 
    WHEN SKILL_CODE & (SELECT PYTHON FROM SKILLS) > 0 AND SKILL_CODE && (SELECT FRONTEND FROM SKILLS) > 0 THEN "A"
    WHEN SKILL_CODE & (SELECT C FROM SKILLS) > 0 THEN "B"
    WHEN SKILL_CODE & (SELECT FRONTEND FROM SKILLS) > 0 THEN "C"
    END AS GRADE, ID, EMAIL
FROM DEVELOPERS)

SELECT * FROM CTE WHERE GRADE IS NOT NULL
ORDER BY GRADE ASC, ID ASC
```
- 첫번째 서브쿼리는 `SKILL_CODES`의 목표 스킬에 대한 서브쿼리, `CATEGORY`가 `FRONT_END`인 과목들을 한번에 처리하기 위해 코드가 2진수의 BIT로 표현되는 걸 이용해 한번에 더해서 처리
- 두번째 서브쿼리는 `GRADE`판정용 서브쿼리, 두 `CODE`의 `AND`결과가 0보다 크다면 비트 하나(과목 하나)는 반드시 포함된다는 것으로 검색 결과에 부합한다
- 세번째, 메인 쿼리는 두번째 서브쿼리에서 `GRADE`가 NULL인 값을 제외하고 검색하는 쿼리리
