![](tilThumb.webp)
# 오늘의 코드카타
> SQL 코드카타
https://leetcode.com/problems/find-customer-referee/
```
SELECT name FROM CUSTOMER
WHERE REFEREE_ID != 2 OR REFEREE_ID IS NULL
```
!=로는 NULL은 집계하지 않는다. 

> 알고리즘 코드카타
https://school.programmers.co.kr/learn/courses/30/lessons/12945
```
fib_list=[0,1]
def fibonacci(n):
    if n<len(fib_list): 
        return fib_list[n]
    else: 
        fib_list.append(fibonacci(n-1)+fibonacci(n-2))
        return fib_list[n]
def solution(n):         
        return fibonacci(n)%1234567
```
평범한 피보나치 문제, 재귀함수와 전역리스트로 피보나치 수열 전체를 완성하며 나아가는 코드를 구상했다. 발생한 런타임에러는 아무래도 입력수로 큰수가 들어와 호출스택이 과도하게 쌓인 탓이라고 추측된다. 
피보나치라고 해서 늘 똑같은 접근을 했던 폐해라고 생각한다. 같은 문제라도 더 다양한 시각에서 봐야하겠다. 
```
def solution(n):
    prev, Next, tmp = 0,1,0
    for i in range(n-1):
        tmp = Next+prev
        prev = Next
        Next = tmp
    return Next%1234567
```
최소한의 자원만 차지하는 코드, 재귀함수, 리스트를 사용하지 않고 변수 3개만 사용한다. 문제에서 0을 입력했다면 for문 전에 예외처리를 했어야 했겠지만 어차피 입력값은 2이상이라 불필요하다. 

---

# OpenAI Playground
GPT 모델 프롬프트 실험 플랫폼, 파라미터를 조정해 모델의 설정을 변경하는 것도 가능
웹 기반의 실행환경으로 직접 코드를 작성하지 않아도 됨
- 유료모델 사용시 과금 측정, 요금제 구독 필요

시스템 명령어 입력 창 - 역할(페르소나)부여
유저 명령어 전달 창
결과를 전달하는 창(어시스턴트 창)

실제 구현을 하려는 목적X
다양한 파라미터 설정으로 여러가지 실험을 편하게 하는데 초점


#### 설정값
1. 모델 - GPT의 현재버전부터 레거시 버전까지 제공
2. 온도 - 랜덤성 조정하는 매개변수, 극단치에서 약간 떨어진 값을 최대치로
3. 토큰 길이 - GPT에서 사용하는 언어 단위, 작게 하면 짧은 답변
만약 생성된 응답이 토큰 길이보다 길어 중간에 잘렸다면, 프롬프트에 이어서 설명해줄 것을 요청하면 답변을 이어서 생성함
4. Top-P - 응답의 다양성 제어, 1.0에 가까울 수록 모든 가능한 답변을 고려해 다양한 응답 생성, 낮을 수록 더 집중된 응답 제출
5. 프롬프트 형식 - 프롬프트 종료를 위해 특정 단어나 기호 사용

Frequency Penalty - 이미 사용한 단어나 문장을 반복하지 않게 함, 값이 높을수록 중복된 표현이 줄어듦
Presence Penalty - 새로운 단어나 아이디어를 더 많이 사용하게 함, 값이 높을수록 더 표현이 다양해짐

Penalty를 너무 과도하게 설정하다보면 외계어를 내뱉는 경우가 생김... 

Role
User - 사용자의 역할, 대화의 주체, 프롬프트를 입력하는 역할 담당
Assistant - 요청에 응답해 답변을 생성하는 역할
System - 대화의 전반적인 규칙이나 지침을 제공하는 역할


#### 주의사항
Playground에서 사용되는 각 토큰마다 비용 발생 - 짧은 프롬프트와 응답을 사용해 토큰 사용량 줄이기
모델이 사실과 다른 정보를 제공할 수도 있음(할루시네이션) - 확인 필수
고정된 데이터 기반 학습 - 최신 정보가 반영되지 않음
프라이버시 - 모델의 입력데이터를 사용해 시스템을 개선하기에 개인정보는 절대 입력 삼가

# 프롬프트 엔지니어링
인공지능 모델에 어떤 입력을 넣어야 모델이 잘 대답할까

프롬프트의 구조나 어조를 조정해 답변의 품질과 일관성을 높일 수 있음
특정한 방식으로 출력을 조정할 때는 명확하고 구체적인 프롬프트를 요구
이전의 대화 내용과 같은 문맥의 답변을 생성하므로 일관성 있는 프롬프트가 작성되어야 함, 새로운 주제에 대해 얘기한다면 새로운 모델(대화) 생성해야 함


#### 동작 원리
모델의 패턴 학습 메커니즘(패턴 인식, 확률 계산)을 활용해 모델이 적절한 경로로 답을 유도하도록 하는 방법

기본 출력 원리:
1. 사용자가 모델에 질문이나 요청 입력
2. 모델이 입력된 프롬프트를 기반으로 맥락 분석, 적절한 답변 생성
3. 학습된 데이터 기반으로 각 단어나 문장의 확률분포 계산, 가장 가능성 높은 답변 선택

프롬프트의 역할: 
출력의 조건 변경, 사용자가 원하는 단어의 선택확률 증가

#### System, Assistant, User 역할 적용
User - LLM과 대화하는 주체, 실제 대화 전달 or 특정 명령 전달
Assistant - User의 질문에 맞는 GPT의 정확한 답변(을 다시 입력으로 받음)
System - 대화의 기본규칙, 어시스턴트의 성격, 대화 전반에 미치는 지침






---

# 데이터 구축을 위한 웹 크롤링
## 웹크롤링
웹사이트에서 자동화된 방법으로 데이터를 수집하는 과정

1. 크롤링할 URL 분석
2. HTTP GET요청 송신, 응답 수신
3. HTML 파싱
4. 데이터 정제 후 저장

#### 웹의 URL

> http://www.domain.com:5611/path/to/resource?a=b&x=y

http				 - protocol
www.domain.com:	 	 - host	
#:					 - port
path/to/resource: 	 - resource path
?a=b&x=y: 			 - query


HTTP 요청 메소드
> 데이터 조회 - GET
데이터 추가 - POST
데이터 수정 - PUT
데이터 삭제 - DELETE

#### 크롤링 허용 여부 확인
크롤링주소/robots.txt를 입력
해당 파일이 없다면 수집에 대한 정책이 없음, 크롤링 허용

명시되었다고 크롤링이 안되는 건 아님, 불법일뿐
교육용이라면 오케이다^^

> 
User-Agent - 웹 서버에 자신을 식별하기 위해 보내는 문자열, 브라우저 종류, 버전, 운영체제 등의 정보 포함

URL의 파라미터는 &로 구분

사용 라이브러리
from bs4 import BeautifulSoup

삼성전자 최근 3개월분 일일 주가정보
웹크롤링해 CSV, JSON으로 출력하기


